import type { Product } from '../types';

// Fallback products (subset) - full list loaded from /products.json
const fallbackProducts: Product[] = [
  { name: "Ultimate Iron 26™", sku: "USYG70008", price: 27.95 },
  { name: "RVB 350/RYL BETA550 - Split Case", sku: "USRS0025", price: 524.95 },
  { name: "YGY Easy Eats Cowboy Salsa Mix - 10 Pack", sku: "USEE1101", price: 97.95 },
  { name: "YGY Easy Eats™ Bursting Berry Blend", sku: "USEE100104", price: 9.95 },
  { name: "YGY Easy Eats™ Roasted Garlic Aioli Seasoning", sku: "USEE300003", price: 9.95 },
  { name: "YGY Easy Eats Cowboy Salsa Mix", sku: "USEE100101", price: 9.95 },
  { name: "YGY GLP 30 Day System", sku: "USYG700", price: 149.95 },
  { name: "ZRadical+™", sku: "3235", price: 39.95 },
  { name: "Collagen Boost Serum", sku: "USYG000030", price: 27.95 },
  { name: "HOPE - Menopause and aging support system", sku: "USYG7000", price: 149.95 },
  { name: "SaXi™ Super Juice +", sku: "20035", price: 39.95 },
  { name: "Pomegranate Fig Balsamic Vinegar", sku: "USSF600003", price: 15 },
  { name: "Cranberry Orange Balsamic Vinegar", sku: "USSF600004", price: 15 },
  { name: "Egyptian Cashew Dukkah", sku: "USSF700201", price: 13.95 },
  { name: "Za'atar Spice", sku: "USSF400202", price: 7.95 },
  { name: "ProCardio FX™", sku: "USYG100093", price: 48.95 },
  { name: "GLP-1 Activator Bundle", sku: "USYG3012", price: 174.95 },
  { name: "GLP-1 Support Bundle", sku: "USYG3013", price: 174.95 },
  { name: "Nano Balance™", sku: "USLF700001", price: 59.95 },
  { name: "Recharge Recovery", sku: "USLF050051", price: 36.95 },
  { name: "VitalSTART - Stick Packs 30 Sticks", sku: "USLF072030", price: 120.95 },
  { name: "VitalSTART - Stick Packs 7 Pack", sku: "USLF072007", price: 35.95 },
  { name: "Gentle Fibre", sku: "USLF050047", price: 19.95 },
  { name: "Adrenal Health (4oz) (4 Pack)", sku: "USGH0001", price: 164.95 },
  { name: "Adrenal Health", sku: "USGH000001", price: 43.95 },
  { name: "ZRadical™ Powder Canister (207G)", sku: "3207", price: 54.95 },
  { name: "Female Hormonal Support (4oz) - 4 Pack", sku: "USGH0015", price: 164.95 },
  { name: "Female Hormonal Support", sku: "USGH000006", price: 43.95 },
  { name: "Women's Hormonal Balancer™ - 120 capsules", sku: "50241", price: 32.95 },
  { name: "Healthy Body Start Pak™ 3.0", sku: "10301", price: 166.95 },
  { name: "Face Serum Bundle", sku: "USYG0038", price: 49.95 },
  { name: "Hyaluronic Acid Serum", sku: "USYG000031", price: 27.95 },
  { name: "Beyond Youngevity Organic Spa Starter Kit", sku: "USYG6031", price: 54.95 },
  { name: "ProJoint FX™", sku: "USYG100092", price: 59.95 },
  { name: "Body Balance", sku: "USLF000130", price: 36.95 },
  { name: "GI Purify™ Essential Oil Blend - 10ml", sku: "67021", price: 29.95 },
  { name: "Repair+", sku: "USBE0101101015", price: 39.95 },
  { name: "Power Pak 2.5", sku: "USYG0013Q", price: 131.95 },
  { name: "Citri-D Vitamin D3 Spray (4 Bottles)", sku: "USYG0030", price: 99.95 },
  { name: "Triple Bliss™ Mint Chocolate", sku: "24620", price: 37.95 },
  { name: "TruBoost (4-pack)", sku: "USLF070019", price: 110.95 },
  { name: "TruBoost (2-pack)", sku: "USLF070018", price: 58.95 },
  { name: "TruBoost (single)", sku: "USLF070017", price: 36.95 },
  { name: "Vitali-C Plus", sku: "USLF070044", price: 44.95 },
  { name: "2 Body Balance & 12 TruBoost", sku: "USLF070022", price: 98.95 },
  { name: "VitalStart Body Shield", sku: "USLF080326", price: 220.95 },
  { name: "Vitali-C Boost & Balance", sku: "USLF080320", price: 112.95 },
  { name: "Life Shift Sticks", sku: "USLF070057", price: 196.95 },
  { name: "Healthy Lean & Green", sku: "USLF070090", price: 153.95 },
  { name: "Cornerstone", sku: "USLF080316", price: 216.95 },
  { name: "Bone & Joint", sku: "USLF000026V", price: 67.95 },
  { name: "Baseline Ultra", sku: "USLF080268", price: 277.95 },
  { name: "Body Balance Mix", sku: "USLF080270", price: 202.95 },
  { name: "Baseline Family", sku: "USLF000020V", price: 194.95 },
  { name: "Baseline", sku: "USLF000021V", price: 104.95 },
  { name: "Befull AminoCharge", sku: "USLF050045", price: 98.95 },
  { name: "AminoCharge", sku: "USLF050030", price: 73.95 },
  { name: "Metabolism Booster Sticks", sku: "USLF070056", price: 73.95 },
  { name: "FlexeoPlus", sku: "USLF000703", price: 28.95 },
  { name: "True Greens", sku: "USLF050017", price: 50.95 },
  { name: "Nutritional Alert Program", sku: "USBI0006", price: 79.95 },
  { name: "Nutritional Energy Program", sku: "USBI0007", price: 89.95 },
  { name: "Youngevity ProLine CEO Mega Pak™", sku: "1052", price: 499.95 },
  { name: "Youngevity ProLine CEO Mega Pak 2.5", sku: "1052Q", price: 499.95 },
  { name: "Health and Beauty CEO Mega Pak - Medium to Dark", sku: "1064", price: 499.95 },
  { name: "Harmony Health CEO Mega Pak™", sku: "1084", price: 499.95 },
  { name: "ZRadical CEO Mega Pak 2.5", sku: "1091Q", price: 499.95 },
  { name: "Healthy Body Detox CEO Mega Pak", sku: "1092", price: 499.95 },
  { name: "The Detox CEO Mega Pak 2.5", sku: "1092Q", price: 499.95 },
  { name: "Detox CEO Mega Pak 2.5 with PJ290", sku: "1092QOM", price: 499.95 },
  { name: "Nutritional Energy Basics", sku: "USBI0001", price: 56.95 },
  { name: "Get Go N Plus", sku: "USBI000010", price: 26.95 },
  { name: "Deluxe Nutritional Energy", sku: "USBI0008", price: 107.95 },
  { name: "A.M. / P.M. Program", sku: "USBI0003", price: 147.95 },
  { name: "3.0 Rise & Restore", sku: "USYG30", price: 99.95 },
  { name: "Prostat - 60 tablets (3 pack)", sku: "PJ107", price: 92.95 },
  { name: "ProJoba Profemme - 60 tablets (3 Pack)", sku: "PJ407", price: 92.95 },
  { name: "Pollen Burst™ Energy Drink – Strawberry Acai 30 Count Box", sku: "PJ730", price: 65.95 },
  { name: "Pollen Burst™ Energy Drink - Dragon Fruit", sku: "PJ830", price: 65.95 },
  { name: "ProJoba Profemme™ - 60 tablets", sku: "PJ400", price: 32.95 },
  { name: "Prostat - 60 tablets", sku: "PJ102", price: 32.95 },
  { name: "Lavender & Chamomile 1% Roller Bottle - 10ml", sku: "67056RB", price: 11.95 },
  { name: "Good Night™ Essential Oil Blend - 10ml", sku: "67105", price: 27.95 },
  { name: "Good Night 2.5%™ 10 ml Roller Bottle", sku: "67605", price: 12.95 },
  { name: "Bliss Spray", sku: "USBEZ101", price: 21.95 },
  { name: "Body Balance Minis (24-Packs) 2-pack", sku: "USLF070052", price: 174.95 },
  { name: "Body Balance Minis (24-Packs)", sku: "USLF070051", price: 95.95 },
  { name: "Body Balance Sticks (4 pack)", sku: "USLF070033", price: 116.95 },
  { name: "Body Balance Sticks (single)", sku: "USLF070031", price: 37.95 },
  { name: "Body Balance Sticks (2 pack)", sku: "USLF070032", price: 37.95 },
  { name: "Bio Nite 2 Fl Oz", sku: "USBI000006", price: 18.95 },
  { name: "H.G.H. Youth Complex™ - 180 capsules", sku: "50223", price: 37.95 },
  { name: "OsteoProCare (four pack)", sku: "USLF000147V", price: 165.95 },
  { name: "OsteoProCare (single bottle)", sku: "USLF000700V", price: 44.95 },
  { name: "Kidsprinklz Watermelon Mist - Multi-Vitamin Powder", sku: "USYG100006", price: 33.95 },
  { name: "Sta-Young™", sku: "USSN000003", price: 29.95 },
  { name: "Sta-Cardio™", sku: "USSN000008", price: 32.95 },
  { name: "HOPE", sku: "USSN000009", price: 32.95 },
  { name: "Sta-Vital™", sku: "USSN000007", price: 25.95 },
  { name: "Aloe Plus", sku: "USBI000001", price: 34.95 },
  { name: "Bio Alert", sku: "USBI000002", price: 29.95 },
  { name: "Bio Fuel", sku: "USBI000004", price: 34.95 },
  { name: "Flexi-Care Plus", sku: "USBI000009", price: 30.95 },
  { name: "Scholastic Enhancement", sku: "USBI0009", price: 129.95 },
  { name: "CAL/MAG 100", sku: "USBI000008", price: 22.95 },
  { name: "Advanced Mobility Program", sku: "USBI0002", price: 79.95 },
  { name: "Biometics Advantage Program", sku: "USBI0011", price: 153.95 },
  { name: "All Day Energy Program", sku: "USBI0010", price: 89.95 },
  { name: "Projoba Probacillus Plus™ - 60 capsules", sku: "PJ435", price: 30 },
  { name: "Pollen Burst™ Tabs - 60 tablets", sku: "PJ302", price: 32.95 },
  { name: "Harmony Healthy Body Start Pack", sku: "USEW5000", price: 252.95 },
  { name: "Midnight Minerals Business Essentials Kit", sku: "1014", price: 199.95 },
  { name: "Midnight Minerals Business Builder Kit (CEO Mega Pak)", sku: "1017", price: 499.95 },
  { name: "Healthy Body Distributor Starter Pak 2.5", sku: "10280Q", price: 174.95 },
  { name: "Life Force CEO Pak", sku: "1016", price: 499.95 },
  { name: "i26 Hyperimmune Egg Powder – French Vanilla", sku: "USLL005060", price: 44.95 },
  { name: "i26 Instant Coffee Combo", sku: "USYG3001", price: 59.95 },
  { name: "i26 Killer Biotic Combo", sku: "USYG3002", price: 59.95 },
  { name: "Japanese Curry Mix", sku: "USSF100110", price: 11.95 },
  { name: "Mulling Spice Mix", sku: "USSF400118", price: 11.95 },
  { name: "Muscadine 20™ Coco Mango Shampoo", sku: "USNP500001", price: 19.95 },
  { name: "Youngevity Shampoo (240 mL)", sku: "USYG600058", price: 16.95 },
  { name: "PerPETual +", sku: "USYG100042", price: 36.95 },
  { name: "Christmas Tree™ Essential Oil Blend - 5ml", sku: "67098", price: 42.95 },
  { name: "Big Smile 10mL Oil Blend", sku: "67163", price: 21.95 },
  { name: "Bounce Back 10mL Oil Blend", sku: "67164", price: 29.95 },
  { name: "Balance of Life™ Essential Oil Blend - 10ml", sku: "67095", price: 69.95 },
  { name: "All Heart™ Essential Oil Blend - 10ml", sku: "67092", price: 27.95 },
  { name: "Tazza Di Vita™ Café Ganoderma - 3 Pack", sku: "USYG4403", price: 99 },
  { name: "Tazza Di Vita™ Café Ganoderma", sku: "USYG400402", price: 37.5 },
  { name: "Harmony Health EMR Smart Patch (3 Pack)", sku: "USEW000007", price: 274.95 },
  { name: "30 Day Detox", sku: "TL003SYS", price: 175.95 },
  { name: "Premiere 30 Day Liver Pure Detox - Chocolate", sku: "TL014SYS", price: 219.95 },
  { name: "Oregano Essential Oil - 10ml", sku: "67101", price: 32.95 },
  { name: "Beyond Sleep Gummies", sku: "USYG100507", price: 35 },
  { name: "Helichrysum 20% Essential Oil Blend - 10ml", sku: "67020", price: 79.95 },
  { name: "Rosehip Carrier Oil – 2 oz", sku: "67250", price: 24.95 },
  { name: "Carrier Oil Bundle 11 - 2 oz bottles", sku: "USYG19960", price: 99.95 },
  { name: "Beyond Sleep System", sku: "USYG5133P", price: 99.95 },
  { name: "TMR-Total Meal Replacement Shake - Chocolate - 30 Day", sku: "USSN100001", price: 57.95 },
  { name: "TMR-Total Meal Replacement Shake - Vanilla - 30 Day", sku: "USSN100000", price: 57.95 },
  { name: "Healthy Start CEO Mega Pak™ 2.5", sku: "1072Q", price: 499.95 },
  { name: "IMD Healthy Body Challenge Starter Pak 2.0", sku: "10280", price: 174.95 },
  { name: "HydroWash™ (HE Version)", sku: "43216", price: 15.95 },
  { name: "Nature Direct Super Strength Concentrate Bundle", sku: "USND2102", price: 40.95 },
  { name: "Nature Direct EnviroMist™ Concentrate - 125ml", sku: "USND200121", price: 28.95 },
  { name: "Majestic Earth™ Mineral STX™", sku: "USYG400401", price: 44.95 },
  { name: "Healthy Body Weight Loss Pak™ 2.5", sku: "10253Q", price: 219.95 },
  { name: "Healthy Body Brain and Heart Pak™ 2.5", sku: "10258Q", price: 219.95 },
  { name: "Healthy Body Start Pak™ 2.5", sku: "10252Q", price: 146.95 },
  { name: "Healthy Body Start Pak™ 2.5 Liquid", sku: "10282Q", price: 146.95 },
  { name: "Healthy Body Bone and Joint Pak™ 2.5", sku: "10256Q", price: 213.95 },
  { name: "Healthy Body Digestion Pak™ 2.5", sku: "10257Q", price: 202.95 },
  { name: "Healthy Body Blood Sugar Pak™ 2.5", sku: "10254Q", price: 173.95 },
  { name: "Healthy Body Athletic Pak™ 2.5", sku: "10259Q", price: 213.95 },
  { name: "Anti-Aging Healthy Body Pak™ 2.5", sku: "10260Q", price: 191.95 },
  { name: "Sta-Restored", sku: "USSN000006", price: 32.95 },
  { name: "PreWorkout Pixie™ Energy + Focus", sku: "USBE0101101020", price: 23.95 },
  { name: "Apple Cider Vinegar Gummies", sku: "USYG100505", price: 35.95 },
  { name: "Beyond Tangy Tangerine 2.5™", sku: "USYG100074", price: 69.95 },
  { name: "Collagen Creamer", sku: "USYG300009", price: 43.95 },
  { name: "Collagen Peptide Joint Health Support", sku: "USYG300006", price: 63.95 },
  { name: "Ultimate Zinc™", sku: "USYG100403", price: 26.95 },
  { name: "Hemp FX™ Dog Chomps", sku: "USYG100037", price: 29.95 },
  { name: "Youngevity Hand Disinfectant – Essential Oil Bundle", sku: "USYG20130", price: 24.95 },
  { name: "Youngevity Hand Sanitizer Gel - 4 Pack", sku: "USYG1424", price: 19.95 },
  { name: "Sanitizing Hand Wipes- 30ct 4-Pack", sku: "USYG2304", price: 24.95 },
  { name: "Sanitizing Hand Wipes- 30ct 10-Pack", sku: "USYG2310", price: 49.95 },
  { name: "CoreAO Stiks", sku: "USBE10001", price: 39.95 },
  { name: "SOUL", sku: "USBE10005", price: 39.95 },
  { name: "SMART", sku: "USBE10002", price: 29.95 },
  { name: "Electrofuel", sku: "USBE10003", price: 39.95 },
  { name: "TRIM Stiks", sku: "USBE10004", price: 39.95 },
  { name: "Eat Less", sku: "USSN000005", price: 25.95 },
  { name: "Sta-Energized PLUS™", sku: "USSN000001", price: 25.95 },
  { name: "Sta-Thin™", sku: "USSN000002", price: 25.95 },
  { name: "Bark Bites - Beyond Apple Pie (2 Pack)", sku: "USFT2024", price: 12 },
  { name: "Sta-Natural™ Plant-Based Protein Shake - Vanilla", sku: "USSN100004", price: 63.95 },
  { name: "Omega™ - 120 capsules", sku: "PJ290", price: 19.95 },
  { name: "Sta-Balanced™", sku: "USSN000004", price: 25.95 },
  { name: "BeneYOU Pre+Probiotics Pixies", sku: "USBE0101101013", price: 25 },
  { name: "True2Life Daily Digest", sku: "TL10229", price: 57.95 },
  { name: "Seasonal Immune Support Pak (30Ct)", sku: "10231", price: 45 },
  { name: "Beyond Immune FX™", sku: "USYG300008", price: 37.95 },
  { name: "Youngevity Ultimate Iodine™", sku: "USYG100402", price: 26.95 },
  { name: "Hemp FX™ Roll-It", sku: "USYG100012", price: 59.95 },
  { name: "Ultimate Vitamin D3", sku: "USYG100099", price: 20.95 },
  { name: "Vitamin C Chewable Tablet", sku: "20685", price: 37.95 },
  { name: "Immunity Booster Bundle", sku: "USYG20000", price: 274.95 },
  { name: "Integris - CoQ10 Plus Vitamin E", sku: "USSI000003", price: 37.95 },
  { name: "Ultimate Microbiome™", sku: "USYG300004", price: 59.95 },
  { name: "Youngevity Waterless Vitamin C - 1 oz.", sku: "P30011AP", price: 46.95 },
  { name: "Collagen Peptides", sku: "USYG300005", price: 30.95 },
  { name: "Lift 60 Superfood Chews", sku: "USWC001461", price: 33.95 },
  { name: "Burn 60 Superfood Chews", sku: "USWC001451", price: 29.95 },
  { name: "Defy 90 Superfood Chews", sku: "USWC001441", price: 36.95 },
  { name: "Power-up 60 Superfood Chews", sku: "USWC001431", price: 26.95 },
  { name: "Recover 60 Superfood Chews", sku: "USWC001421", price: 29.95 },
  { name: "Clarity 60 Superfood Chews", sku: "USWC001411", price: 36.95 },
  { name: "Revive Well 60 Soft Chews", sku: "USWC001101", price: 36.95 },
  { name: "Nourish Superfood Protein Shake", sku: "USWC001401", price: 48.95 },
  { name: "Youngevity FitShake™ Chocolate", sku: "USYG300003", price: 59.95 },
  { name: "Simply Body Custard - 4 oz", sku: "SP667", price: 11.25 },
  { name: "Ultimate Super KB™ - 90 capsules", sku: "67508", price: 31.95 },
  { name: "CAL Toddy™ - 32 fl oz", sku: "81200", price: 43.95 },
  { name: "Ultra Body Toddy™", sku: "81099", price: 48.95 },
  { name: "Core90 Healthy Body Pak", sku: "10090", price: 109.95 },
  { name: "Slender FX™ Chocolate Crème True Keto Shake", sku: "USYG100066", price: 92.95 },
  { name: "Ultimate Gluco-Gel™ - 120 capsules (4 Pack)", sku: "21251C", price: 92.95 },
  { name: "Ultimate Gluco-Gel™ - 240 capsules (4 Pack)", sku: "21252C", price: 164.95 },
  { name: "MSM Ultra™ (180 Caplets)", sku: "USFL000123", price: 43.95 },
  { name: "Ultimate Digest Fx™ - 90 capsules (4 Pack)", sku: "USYG100090C", price: 142.95 },
  { name: "Ultimate Digest Fx™", sku: "USYG100090", price: 37.95 },
  { name: "Beyond Osteo-FX™ Powder", sku: "21251", price: 43.95 },
  { name: "Beyond Osteo-FX™ Liquid", sku: "13203", price: 28.95 },
  { name: "EFA Plus™", sku: "20641", price: 32.95 },
  { name: "Ultimate EFA™", sku: "20640", price: 24.95 },
  { name: "Ultimate EFA Plus™", sku: "20642", price: 39.95 },
  { name: "Plant Derived Minerals™", sku: "13202", price: 21.95 },
  { name: "Ultimate Classic™", sku: "20670", price: 32.95 },
  { name: "Ultimate Daily™", sku: "21201", price: 26.95 },
  { name: "Ultimate Selenium™", sku: "20671", price: 17.95 },
  { name: "Synaptiv™", sku: "USYG100091", price: 59.95 },
  { name: "Ultimate Enzymes™", sku: "20680", price: 24.95 },
  { name: "Root Beer Belly™", sku: "USYG100064", price: 39.95 },
  { name: "Slender FX™ Sweet Eze™", sku: "USYG100065", price: 39.95 },
  { name: "Killer Biotic Fx™", sku: "USYG100088", price: 39.95 },
  { name: "Good Herbs Cardiovascular Support", sku: "USGH000002", price: 43.95 },
  { name: "Good Herbs Lung Support", sku: "USGH000003", price: 43.95 },
  { name: "Good Herbs Liver Support", sku: "USGH000004", price: 43.95 },
  { name: "Good Herbs Kidney Support", sku: "USGH000005", price: 43.95 },
  { name: "Good Herbs Male Hormonal Support", sku: "USGH000007", price: 43.95 },
  { name: "Good Herbs Thyroid Support", sku: "USGH000008", price: 43.95 },
  { name: "Good Herbs Blood Sugar Support", sku: "USGH000009", price: 43.95 },
  { name: "Good Herbs Brain Support", sku: "USGH000010", price: 43.95 },
  { name: "Good Herbs Immune Support", sku: "USGH000011", price: 43.95 },
  { name: "Good Herbs Circulatory Support", sku: "USGH000012", price: 43.95 },
  { name: "Good Herbs Digestive Support", sku: "USGH000013", price: 43.95 },
  { name: "Good Herbs Parasite Cleanse", sku: "USGH000014", price: 43.95 },
  { name: "Rebound Fx™ Citrus Punch", sku: "USYG100063", price: 39.95 },
  { name: "Rebound Fx™ On-The-Go Pouches", sku: "USYG100062", price: 32.95 },
  { name: "BTT 2.0 Citrus Peach Fusion", sku: "USYG100075", price: 69.95 },
  { name: "BTT 2.0 Tablets", sku: "USYG100076", price: 59.95 },
  { name: "Beyond Tangy Tangerine Tablets", sku: "USYG100077", price: 49.95 },
  { name: "Majestic Earth Ultimate Tangy Tangerine", sku: "USYG100078", price: 49.95 },
];

// Mutable products array - starts with fallback, gets replaced when JSON loads
export let products: Product[] = [...fallbackProducts];

// Load full product list from JSON file
export async function loadProducts(): Promise<Product[]> {
  try {
    const response = await fetch('/products.json');
    if (!response.ok) {
      console.warn('Failed to load products.json, using fallback products');
      return products;
    }
    const data = await response.json();
    
    // Filter and clean the products
    const validProducts: Product[] = data
      .filter((p: any) => 
        p && 
        typeof p.name === 'string' && 
        typeof p.sku === 'string' && 
        typeof p.price === 'number' &&
        p.name.length > 0 &&
        p.sku.length > 0 &&
        !p.sku.includes(' ') // Filter out malformed SKUs
      )
      .map((p: any) => ({
        name: p.name.replace(/�/g, '™').trim(),
        sku: p.sku.trim(),
        price: p.price
      }));
    
    // Remove duplicates by SKU
    const seen = new Set<string>();
    const uniqueProducts = validProducts.filter((p: Product) => {
      if (seen.has(p.sku)) return false;
      seen.add(p.sku);
      return true;
    });
    
    products = uniqueProducts;
    console.log(`Loaded ${products.length} products from JSON`);
    return products;
  } catch (error) {
    console.warn('Error loading products.json:', error);
    return products;
  }
}

// Initialize products on module load
loadProducts();
